<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 'http://www.w3.org/TR/html4/loose.dtd"'>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Upgrading 4.5 or higher to 4.6.3</title><link rel="stylesheet" type="text/css" href="openacs.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.2"><link rel="home" href="index.html" title="OpenACS Core Documentation"><link rel="up" href="upgrade.html" title="Chapter 5. Upgrading"><link rel="previous" href="upgrade-overview.html" title="Overview"><link rel="next" href="upgrade-4.6.3-to-5.html" title="Upgrading OpenACS 4.6.3 to 5.0"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><a href="http://openacs.org"><img src="/doc/images/alex.jpg" style="border:0" alt="Alex logo"></a><table width="100%" summary="Navigation header" border="0"><tr><td width="20%" align="left"><a accesskey="p" href="upgrade-overview.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Upgrading</th><td width="20%" align="right"> <a accesskey="n" href="upgrade-4.6.3-to-5.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade-4.5-to-4.6"></a>Upgrading 4.5 or higher to 4.6.3</h2></div></div></div>
      
      <a class="indexterm" name="idp140682183766008"></a>
      <p>The required platform for OpenACS 4.6 is the same as
      4.5, with the exception of OpenFTS.  OpenACS 4.6 and later require OpenFTS 0.3.2 for full text search on PostGreSQL.  If you have OpenFTS 0.2, you'll need to upgrade.  </p>
      <p>If upgrading from 4.4, you need to manually run acs-kernel/sql/postgres/upgrade-4.4-4.5.sql.  See <a class="ulink" href="http://openacs.org/bugtracker/openacs/bug?bug_number=632" target="_top">Bug #632</a></p>
      <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem" style="list-style-type: circle"><p>A computer with OpenACS 4.5.</p>
        </li><li class="listitem" style="list-style-type: circle"><p><a class="ulink" href="http://openacs.org/projects/openacs/download/" target="_top">OpenACS 4.6 tarball</a> or CVS checkout/export.</p>
        </li><li class="listitem" style="list-style-type: circle"><p>Required for Full Text Search on PostgreSQL: <a class="ulink" href="http://openfts.sourceforge.net" target="_top">OpenFTS 0.3.2</a></p>
        </li></ul></div>
      <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
          <p>
            <b>Make a Backup. </b>
            Back up the database and file system (see <a class="xref" href="snapshot-backup.html" title="Manual backup and recovery">the section called “Manual backup and recovery”</a>).
          </p>
        </li><li class="listitem">
          <p>
            <b>OPTIONAL: Upgrade OpenFTS. </b>
            <a class="xref" href="upgrade-supporting.html#upgrade-openfts-0.2-to-0.3.2" title="Upgrading OpenFTS from 0.2 to 0.3.2">the section called “Upgrading OpenFTS from 0.2 to 0.3.2”</a>
          </p>
        </li><li class="listitem">
          <p>
            Stop the server
          </p>
          <pre class="screen">[root root]# <strong class="userinput"><code>svc -d /service/<em class="replaceable"><code>$OPENACS_SERVICE_NAME</code></em></code></strong></pre>
        </li><li class="listitem">
          <p>
            <b>Upgrade the file system. </b>
            <a class="xref" href="upgrade-openacs-files.html" title="Upgrading the OpenACS files">the section called “Upgrading the OpenACS files”</a>
          </p>
        </li><li class="listitem">
          <p>
            <span class="strong"><strong>Start the server</strong></span>
          </p>
          <pre class="screen">[root root]# <strong class="userinput"><code>svc -u /service/<em class="replaceable"><code>$OPENACS_SERVICE_NAME</code></em></code></strong></pre>
        </li><li class="listitem">
          <p><a name="upgrade-with-apm"></a>
            <b>Use APM to upgrade the database. </b>
            
          </p>
          <div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
              <p>Browse to the package manager, <code class="computeroutput">http://<em class="replaceable"><code>yourserver</code></em>/acs-admin/apm</code>.</p>
            </li><li class="listitem">
              <p>Click <code class="computeroutput"><span class="guilabel">Install packages.</span></code></p>
            </li><li class="listitem">
              <p>Select the packages you want to install.  This should
              be everything that says
              <code class="computeroutput">upgrade</code>, plus any new
              packages you want.  It's safest to upgrade the kernel by
              itself, and then come back and upgrade the rest of the
              desired packages in a second pass.</p>
            </li><li class="listitem">
              <p>On the next screen, click <code class="computeroutput"><span class="guibutton">Install Packages</span></code></p>
            </li><li class="listitem">
              <p>When prompted, restart the server:</p>
              <pre class="screen">[root root]# <strong class="userinput"><code>restart-aolserver <em class="replaceable"><code>$OPENACS_SERVICE_NAME</code></em></code></strong></pre>
            </li><li class="listitem">
              <p>Wait a minute, then browse to the package manager, <code class="computeroutput">http://<em class="replaceable"><code>yourserver</code></em>/acs-admin/apm</code>.</p>
            </li><li class="listitem">
              <p>Check that the kernel upgrade worked by clicking <code class="computeroutput"><span class="guilabel">All</span></code> and making sure that <code class="computeroutput">acs-kernel</code> version is 5.9.0.</p>
            </li></ol></div>
        </li><li class="listitem">
          <p>
            <b>Rollback. </b>
            If anything goes wrong, <a class="link" href="snapshot-backup.html#recovery" title="Recovery">roll back</a> to the backup snapshot.
          </p>
        </li></ol></div>
    </div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="upgrade-overview.html">Prev</a> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right"> <a accesskey="n" href="upgrade-4.6.3-to-5.html">Next</a></td></tr><tr><td width="40%" align="left">Overview </td><td width="20%" align="center"><a accesskey="u" href="upgrade.html">Up</a></td><td width="40%" align="right"> Upgrading OpenACS 4.6.3 to 5.0</td></tr></table><hr><address><a href="mailto:docs@openacs.org">docs@openacs.org</a></address></div><a name="comments"></a></body></html>
